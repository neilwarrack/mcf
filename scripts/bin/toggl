#!/usr/bin/env python
# encoding: utf-8

import keyring
import argparse
from toggl import Toggl


if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='''
    CLI for Toggl.com
    ''', formatter_class=argparse.RawDescriptionHelpFormatter)
    parser.add_argument('command', help='command to execute', default="status")
    args = parser.parse_args()

    token = keyring.get_password('toggl', 'sergey')

    t = Toggl(token)

    if args.command == "running":
        print('no' if t.current() is None else 'yes')
    else:
        r = t.current()
        print 'Current time entry: %s' % r['description']
        r = t.time_entries()
        print 'Last time entry: %s' % r[-1]['description']
